humhub.module("calendar.reminder.Form",function(i,e,a){var t=e("ui.widget").Widget,n=e("client"),r=e("ui.additions"),d=".calendar-reminder-items",s=".calendar-reminder-item-defaults",c="[data-action-click]",o=t.extend();o.prototype.init=function(){this.checkMaxReminder(),this.checkRemidnerType()},o.prototype.checkMaxReminder=function(){var e=this.$.find("[data-reminder-index]");this.$.find(c).data("action-click","delete").removeClass("btn-primary").addClass("btn-danger").find("i").removeClass("fa-plus").addClass("fa-times"),e.length<this.options.maxReminder&&e.last().find(c).data("action-click","add").removeClass("btn-danger").addClass("btn-primary").find("i").removeClass("fa-times").addClass("fa-plus")},o.prototype.checkRemidnerType=function(){var e=a("#remindersettings-remindertype").val();0==e?(a(d).hide(),a(s).hide()):2==e?(a(d).show(),a(s).hide()):1==e&&(a(d).hide(),a(s).show())},o.prototype.delete=function(e){var t=this;e.$trigger.closest(".row").fadeOut("fast",function(){a(this).remove(),t.checkMaxReminder()})},o.prototype.add=function(e){var t=e.$trigger.closest(".row"),i=parseInt(t.attr("data-reminder-index")),n=t.clone().attr("data-reminder-index",++i);n.find("[name]").each(function(){a(this).attr("name",a(this).attr("name").replace(/^CalendarReminder\[\d]/,"CalendarReminder["+i+"]"))}),n.find("[id]").each(function(){a(this).attr("id",a(this).attr("id").replace(/^calendarreminder-\d/,"calendarreminder-"+i))}),n.find(".select2-container").remove(),r.applyTo(n),n.insertAfter(t),this.checkMaxReminder()},o.prototype.reset=function(e){var t=this.$.find(".calendar-reminder-items");n.post(e).then(function(e){t.replaceWith(a(e.html).find(".calendar-reminder-items")),i.log.success("saved")}).catch(function(e){i.log.error(e,!0)})},i.export=o});