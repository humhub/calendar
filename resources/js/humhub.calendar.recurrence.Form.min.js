humhub.module("calendar.recurrence.Form",function(t,e,c){var r=e("ui.widget").Widget,n=e("client"),i=r.extend(),o="#recurrenceformmodel-frequency";i.prototype.init=function(){this.updatedValue(),this.updatedType(),this.updatedEnd();var r=this;this.options.pickerSelector&&c(this.options.pickerSelector).on("change",function(){var e=c(this),t=e.datepicker("getDate");c("#recurrenceformmodel-weekdays").val(t.getDay()+1).trigger("change"),r.updateMonthlySelection(e.val())})},i.prototype.updateMonthlySelection=function(e){n.get(this.options.updateMonthlyRecurrenceTest,{data:{date:e}}).then(function(t){if(t.result){var n=c("#recurrenceformmodel-monthdayselection");c.each(t.result,function(e,t){var r=n.find("option[value="+e+"]");r.length?r.text(t):n.append(c("<option>").attr("value",e).text(t))}),n.find("option").each(function(){var e=c(this).val();t.result[e]||c(this).remove()})}}).catch(function(e){t.log.error(e)})},i.prototype.updatedValue=function(){var e=this.$.find(o),r=parseInt(this.$.find("#recurrenceformmodel-interval").val(),10);e.find("option").each(function(){var e=c(this),t=1<r?e.data("plural"):e.data("singular");e.text(t)})},i.prototype.updatedType=function(){var e=parseInt(this.$.find(o).val(),10);-1===e?this.$.find(".hideIfNoRecurrence").hide():(this.$.find(".hideIfNoRecurrence").show(),this.$.find("[data-recurrence-type]").hide(),this.$.find('[data-recurrence-type="'+e+'"]').show())},i.prototype.updatedEnd=function(){switch(parseInt(this.$.find("#recurrenceformmodel-end").val(),10)){case 0:return void c(".recurrence-end-date, .recurrence-end-occurrences").hide();case 1:return c(".recurrence-end-date").show(),void c(".recurrence-end-occurrences").hide();case 2:return c(".recurrence-end-date").hide(),void c(".recurrence-end-occurrences").show()}},t.export=i});