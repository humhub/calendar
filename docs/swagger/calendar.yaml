openapi: 3.0.0
info:
  description: |
    Welcome to the HumHub calendar module API reference.
  version: 1.0.0
  title: HumHub - Calendar API
  contact:
    email: info@humhub.com
  license:
    name: AGPLv2
    url: https://www.humhub.org/en/licences
paths:
  /calendar:
    get:
      tags:
        - Calendar
      summary: Find all calendars entries
      description: ""
      parameters:
        - $ref: https://raw.githubusercontent.com/humhub/rest/master/docs/swagger/common.yaml#/components/parameters/pageParam
        - $ref: https://raw.githubusercontent.com/humhub/rest/master/docs/swagger/common.yaml#/components/parameters/limitParam
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  total:
                    $ref: https://raw.githubusercontent.com/humhub/rest/master/docs/swagger/common.yaml#/components/schemas/totalProperty
                  page:
                    $ref: https://raw.githubusercontent.com/humhub/rest/master/docs/swagger/common.yaml#/components/schemas/pageProperty
                  pages:
                    $ref: https://raw.githubusercontent.com/humhub/rest/master/docs/swagger/common.yaml#/components/schemas/pagesProperty
                  links:
                    $ref: https://raw.githubusercontent.com/humhub/rest/master/docs/swagger/common.yaml#/components/schemas/linksProperty
                  results:
                    type: array
                    items:
                      $ref: "#/components/schemas/CalendarEntry"
            application/xml:
              schema:
                type: object
                properties:
                  total:
                    $ref: https://raw.githubusercontent.com/humhub/rest/master/docs/swagger/common.yaml#/components/schemas/totalProperty
                  page:
                    $ref: https://raw.githubusercontent.com/humhub/rest/master/docs/swagger/common.yaml#/components/schemas/pageProperty
                  pages:
                    $ref: https://raw.githubusercontent.com/humhub/rest/master/docs/swagger/common.yaml#/components/schemas/pagesProperty
                  links:
                    $ref: https://raw.githubusercontent.com/humhub/rest/master/docs/swagger/common.yaml#/components/schemas/linksProperty
                  results:
                    type: array
                    items:
                      $ref: "#/components/schemas/CalendarEntry"
  "/calendar/container/{id}":
    get:
      tags:
        - Calendar
      summary: Find all calendar entries by container
      description: ""
      parameters:
        - name: id
          in: path
          description: ID of content container
          required: true
          schema:
            type: integer
        - $ref: https://raw.githubusercontent.com/humhub/rest/master/docs/swagger/content.yaml#/components/parameters/topicsParam
        - $ref: https://raw.githubusercontent.com/humhub/rest/master/docs/swagger/common.yaml#/components/parameters/pageParam
        - $ref: https://raw.githubusercontent.com/humhub/rest/master/docs/swagger/common.yaml#/components/parameters/limitParam
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  total:
                    $ref: https://raw.githubusercontent.com/humhub/rest/master/docs/swagger/common.yaml#/components/schemas/totalProperty
                  page:
                    $ref: https://raw.githubusercontent.com/humhub/rest/master/docs/swagger/common.yaml#/components/schemas/pageProperty
                  pages:
                    $ref: https://raw.githubusercontent.com/humhub/rest/master/docs/swagger/common.yaml#/components/schemas/pagesProperty
                  links:
                    $ref: https://raw.githubusercontent.com/humhub/rest/master/docs/swagger/common.yaml#/components/schemas/linksProperty
                  results:
                    type: array
                    items:
                      $ref: "#/components/schemas/CalendarEntry"
            application/xml:
              schema:
                type: object
                properties:
                  total:
                    $ref: https://raw.githubusercontent.com/humhub/rest/master/docs/swagger/common.yaml#/components/schemas/totalProperty
                  page:
                    $ref: https://raw.githubusercontent.com/humhub/rest/master/docs/swagger/common.yaml#/components/schemas/pageProperty
                  pages:
                    $ref: https://raw.githubusercontent.com/humhub/rest/master/docs/swagger/common.yaml#/components/schemas/pagesProperty
                  links:
                    $ref: https://raw.githubusercontent.com/humhub/rest/master/docs/swagger/common.yaml#/components/schemas/linksProperty
                  results:
                    type: array
                    items:
                      $ref: "#/components/schemas/CalendarEntry"
        "404":
          description: Not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 404
                  message:
                    type: string
                    example: Content container not found!
            application/xml:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 404
                  message:
                    type: string
                    example: Content container not found!
    post:
      tags:
        - Calendar entry
      summary: Create new calendar entry
      description: ""
      parameters:
        - in: path
          name: id
          description: The id of content container
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - CalendarEntry
                - CalendarEntryForm
              properties:
                CalendarEntry:
                  type: object
                  required:
                    - title
                  properties:
                    title:
                      type: string
                      example: Api calendar event
                    description:
                      type: string
                      example: Api calendar event description
                    color:
                      type: string
                      example: "#6fdbe8"
                    all_day:
                      type: integer
                      format: int64
                      example: 0
                    participation_mode:
                      type: integer
                      format: int64
                      example: 2
                    max_participants:
                      type: integer
                      format: int64
                      example: null
                    allow_decline:
                      type: integer
                      format: int64
                      example: 1
                    allow_maybe:
                      type: integer
                      format: int64
                      example: 1
                    participant_info:
                      type: string
                      example: ""
                CalendarEntryForm:
                  type: object
                  required:
                    - start_date
                    - end_date
                  properties:
                    is_public:
                      type: integer
                      format: int64
                      example: 1
                    start_date:
                      type: string
                      format: date
                      example: 2019-03-23
                    start_time:
                      type: string
                      example: 10:00
                    end_date:
                      type: string
                      format: date
                      example: 2019-03-25
                    end_time:
                      type: string
                      example: 20:30
                    timeZone:
                      type: string
                      example: America/Los_Angeles
                    forceJoin:
                      type: integer
                      format: int64
                      example: 0
                    topics:
                      type: array
                      items:
                        type: integer
                        format: int64
                        example: 3
                content:
                  $ref: https://raw.githubusercontent.com/humhub/rest/master/docs/swagger/content.yaml#/components/schemas/Content
        description: Calendar entry information
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CalendarEntry"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 403
                  message:
                    type: string
                    example: You are not allowed to create calendar entry!
        "404":
          description: Not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 404
                  message:
                    type: string
                    example: Content container not found!
        "422":
          description: Validation failed
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 500
                  message:
                    type: string
                    example: Internal error while save calendar entry!
    delete:
      tags:
        - Calendar
      summary: Deletes a calendar entries by container
      parameters:
        - name: id
          in: path
          description: The id of content container
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 200
                  message:
                    type: string
                    example: Records successfully deleted!
        "404":
          description: Not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 404
                  message:
                    type: string
                    example: Content container not found!
  "/calendar/entry/{id}":
    get:
      tags:
        - Calendar entry
      summary: Get calendar entry by id
      description: ""
      parameters:
        - name: id
          in: path
          description: The id of the calendar entry
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CalendarEntry"
        "404":
          description: Not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 404
                  message:
                    type: string
                    example: Calendar entry not found
    put:
      tags:
        - Calendar entry
      summary: Update calendar entry by id
      description: ""
      parameters:
        - name: id
          in: path
          description: The id of the calendar entry
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - CalendarEntry
                - CalendarEntryForm
              properties:
                CalendarEntry:
                  type: object
                  required:
                    - title
                  properties:
                    title:
                      type: string
                      example: Api calendar event
                    description:
                      type: string
                      example: Api calendar event description
                    color:
                      type: string
                      example: "#6fdbe8"
                    all_day:
                      type: integer
                      format: int64
                      example: 0
                    participation_mode:
                      type: integer
                      format: int64
                      example: 2
                    max_participants:
                      type: integer
                      format: int64
                      example: null
                    allow_decline:
                      type: integer
                      format: int64
                      example: 1
                    allow_maybe:
                      type: integer
                      format: int64
                      example: 1
                    participant_info:
                      type: string
                      example: ""
                CalendarEntryForm:
                  type: object
                  required:
                    - start_date
                    - end_date
                  properties:
                    is_public:
                      type: integer
                      format: int64
                      example: 1
                    start_date:
                      type: string
                      format: date
                      example: 2019-03-23
                    start_time:
                      type: string
                      example: 10:00
                    end_date:
                      type: string
                      format: date
                      example: 2019-03-25
                    end_time:
                      type: string
                      example: 20:30
                    timeZone:
                      type: string
                      example: America/Los_Angeles
                    forceJoin:
                      type: integer
                      format: int64
                      example: 0
                    sendUpdateNotification:
                      type: integer
                      format: int64
                      example: 0
                    topics:
                      type: array
                      items:
                        type: integer
                        format: int64
                        example: 3
                content:
                  $ref: https://raw.githubusercontent.com/humhub/rest/master/docs/swagger/content.yaml#/components/schemas/Content
        description: Calendar entry information
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CalendarEntry"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 403
                  message:
                    type: string
                    example: You are not allowed to edit this calendar entry!
        "404":
          description: Not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 404
                  message:
                    type: string
                    example: Calendar entry not found
        "422":
          description: Validation failed
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 500
                  message:
                    type: string
                    example: Internal error while update calendar entry!
    delete:
      tags:
        - Calendar entry
      summary: Delete the calendar entry by id
      parameters:
        - name: id
          in: path
          description: The id of calendar entry
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 200
                  message:
                    type: string
                    example: Calendar entry successfully deleted!
        "404":
          description: Not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 404
                  message:
                    type: string
                    example: Calendar entry not found
  "/calendar/entry/{id}/upload-files":
    post:
      tags:
        - Calendar entry management
      summary: Attach files to calendar entry
      description: ""
      parameters:
        - in: path
          name: id
          description: The id of the calendar entry
          required: true
          schema:
            type: integer
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                files:
                  description: The files to upload.
                  type: array
                  items:
                    type: file
              required:
                - files
        required: true
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 200
                  message:
                    type: string
                    example: Files successfully uploaded.
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 400
                  message:
                    type: string
                    example: No files to upload.
        "404":
          description: Not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 404
                  message:
                    type: string
                    example: Content record not found!
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 500
                  message:
                    type: string
                    example: Internal error while saving file.
  "/calendar/entry/{id}remove-file/{fileId}":
    delete:
      tags:
        - Calendar entry management
      summary: Remove file from calendar entry
      description: ""
      parameters:
        - in: path
          name: id
          description: The id of the calendar entry
          required: true
          schema:
            type: integer
        - in: path
          name: fileId
          required: true
          description: The id of file to remove.
          schema:
            type: integer
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 200
                  message:
                    type: string
                    example: File successfully removed.
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 403
                  message:
                    type: string
                    example: Insufficient permissions!
        "404":
          description: Not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 404
                  message:
                    type: string
                    example: Could not find requested content record or file!
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 500
                  message:
                    type: string
                    example: Internal error while removing file.
  "/calendar/entry/{id}/respond":
    post:
      tags:
        - Participants
      summary: Change the user participant
      description: ""
      parameters:
        - in: path
          name: id
          description: The id of the calendar entry
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - type
              properties:
                type:
                  type: integer
                  format: int64
                  enum:
                    - 0
                    - 1
                    - 2
                    - 3
                  example: 3
                  description: |
                    Participant type:
                     * 1 - decline.
                     * 2 - maybe.
                     * 3 - accept.
                     * 0 - remove from participants.
        required: true
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 200
                  message:
                    type: string
                    example: Participation successfully changed.
        "400":
          description: Bad request
        "404":
          description: Not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 404
                  message:
                    type: string
                    example: Calendar entry not found
servers:
  - url: /api/v1
components:
  securitySchemes:
    _ref: https://raw.githubusercontent.com/humhub/rest/master/docs/swagger/common.yaml#/securityDefinitions
  schemas:
    CalendarEntry:
      type: object
      properties:
        id:
          type: integer
          format: int64
          readOnly: true
          example: 6
        title:
          type: string
          example: Space event by API
        description:
          type: string
          example: Space event by API description
        start_datetime:
          type: string
          format: datetime
          example: 2019-02-27 00:00:00
        end_datetime:
          type: string
          format: datetime
          example: 2019-02-28 23:59:00
        all_day:
          type: integer
          format: int64
          example: 1
        participation_mode:
          type: integer
          format: int64
          example: 2
        color:
          type: string
          example: "#6fdbe8"
        allow_decline:
          type: integer
          format: int64
          example: 1
        allow_maybe:
          type: integer
          format: int64
          example: 1
        time_zone:
          type: string
          example: America/Los_Angeles
        participant_info:
          type: string
          example: ""
        closed:
          type: integer
          format: int64
          example: 0
        max_participants:
          type: string
          example: null
        location:
          type: string
          example: null
        content:
          $ref: https://raw.githubusercontent.com/humhub/rest/master/docs/swagger/content.yaml#/components/schemas/Content
    CalendarEntryPostParams:
      in: body
      name: body
      description: Calendar entry information
      schema:
        type: object
        required:
          - CalendarEntry
          - CalendarEntryForm
        properties:
          CalendarEntry:
            type: object
            required:
              - title
            properties:
              title:
                type: string
                example: Api calendar event
              description:
                type: string
                example: Api calendar event description
              color:
                type: string
                example: "#6fdbe8"
              all_day:
                type: integer
                format: int64
                example: 0
              participation_mode:
                type: integer
                format: int64
                example: 2
              max_participants:
                type: integer
                format: int64
                example: null
              allow_decline:
                type: integer
                format: int64
                example: 1
              allow_maybe:
                type: integer
                format: int64
                example: 1
              participant_info:
                type: string
                example: ""
          CalendarEntryForm:
            type: object
            required:
              - start_date
              - end_date
            properties:
              is_public:
                type: integer
                format: int64
                example: 1
              start_date:
                type: string
                format: date
                example: 2019-03-23
              start_time:
                type: string
                example: 10:00
              end_date:
                type: string
                format: date
                example: 2019-03-25
              end_time:
                type: string
                example: 20:30
              timeZone:
                type: string
                example: America/Los_Angeles
              forceJoin:
                type: integer
                format: int64
                example: 0
              topics:
                type: array
                items:
                  type: integer
                  format: int64
                  example: 3
          content:
            $ref: https://raw.githubusercontent.com/humhub/rest/master/docs/swagger/content.yaml#/components/schemas/Content
      x-s2o-delete: true
    CalendarEntryPutParams:
      in: body
      name: body
      description: Calendar entry information
      schema:
        type: object
        required:
          - CalendarEntry
          - CalendarEntryForm
        properties:
          CalendarEntry:
            type: object
            required:
              - title
            properties:
              title:
                type: string
                example: Api calendar event
              description:
                type: string
                example: Api calendar event description
              color:
                type: string
                example: "#6fdbe8"
              all_day:
                type: integer
                format: int64
                example: 0
              participation_mode:
                type: integer
                format: int64
                example: 2
              max_participants:
                type: integer
                format: int64
                example: null
              allow_decline:
                type: integer
                format: int64
                example: 1
              allow_maybe:
                type: integer
                format: int64
                example: 1
              participant_info:
                type: string
                example: ""
          CalendarEntryForm:
            type: object
            required:
              - start_date
              - end_date
            properties:
              is_public:
                type: integer
                format: int64
                example: 1
              start_date:
                type: string
                format: date
                example: 2019-03-23
              start_time:
                type: string
                example: 10:00
              end_date:
                type: string
                format: date
                example: 2019-03-25
              end_time:
                type: string
                example: 20:30
              timeZone:
                type: string
                example: America/Los_Angeles
              forceJoin:
                type: integer
                format: int64
                example: 0
              sendUpdateNotification:
                type: integer
                format: int64
                example: 0
              topics:
                type: array
                items:
                  type: integer
                  format: int64
                  example: 3
          content:
            $ref: https://raw.githubusercontent.com/humhub/rest/master/docs/swagger/content.yaml#/components/schemas/Content
      x-s2o-delete: true
